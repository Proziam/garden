<!DOCTYPE html>
<html lang="en" class="h-full antialiased">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="noindex, nofollow">

	<title>{% block title %}{% endblock %} - Digital Garden</title>

	<link rel="stylesheet" href="/static/css/app.css">
	
	<script>
		// Initialize theme from localStorage or system preference
		(function() {
			const theme = localStorage.getItem('theme');
			if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
				document.documentElement.classList.add('dark');
			}
		})();
	</script>

	{% block head %}
	{% endblock %}
</head>

<body class="flex h-full bg-zinc-50 dark:bg-black">
	<!-- Mobile Navigation Menu Overlay -->
	<div id="mobile-menu-backdrop" class="fixed inset-0 z-[60] bg-zinc-800/40 backdrop-blur-sm transition-opacity duration-150 opacity-0 pointer-events-none dark:bg-black/80"></div>
	
	<!-- Mobile Navigation Menu Panel -->
	<div id="mobile-menu-panel" class="fixed inset-x-4 top-8 z-[70] origin-top rounded-3xl bg-white p-8 ring-1 ring-zinc-900/5 transition-all duration-150 scale-95 opacity-0 pointer-events-none dark:bg-zinc-900 dark:ring-zinc-800">
		<div class="flex flex-row-reverse items-center justify-between">
			<button id="mobile-menu-close" aria-label="Close menu" class="-m-1 p-1">
				<svg viewBox="0 0 24 24" aria-hidden="true" class="h-6 w-6 text-zinc-500 dark:text-zinc-400">
					<path d="m17.25 6.75-10.5 10.5M6.75 6.75l10.5 10.5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
			</button>
			<h2 class="text-sm font-medium text-zinc-600 dark:text-zinc-400">
				Navigation
			</h2>
		</div>
		<nav class="mt-6">
			<ul class="-my-2 divide-y divide-zinc-100 text-base text-zinc-800 dark:divide-zinc-100/5 dark:text-zinc-300">
				<li><a href="/" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">Home</a></li>
				<li><a href="/about" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">About</a></li>
				<li><a href="/posts" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">Articles</a></li>
				<li><a href="/projects" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">Projects</a></li>
				<li><a href="/speaking" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">Speaking</a></li>
				<li><a href="/uses" class="block py-2 transition hover:text-teal-500 dark:hover:text-teal-400">Uses</a></li>
			</ul>
		</nav>
	</div>
	
	{% block content %}
	{% endblock %}

	{% block scripts %}
	{% endblock %}
	
	<script>
		// Theme toggle functionality
		document.addEventListener('DOMContentLoaded', function() {
			const toggleButton = document.getElementById('theme-toggle');
			if (toggleButton) {
				toggleButton.addEventListener('click', function() {
					const isDark = document.documentElement.classList.contains('dark');
					
					if (isDark) {
						document.documentElement.classList.remove('dark');
						localStorage.setItem('theme', 'light');
						toggleButton.setAttribute('aria-label', 'Switch to dark theme');
					} else {
						document.documentElement.classList.add('dark');
						localStorage.setItem('theme', 'dark');
						toggleButton.setAttribute('aria-label', 'Switch to light theme');
					}
				});
				
				// Set initial aria-label
				const isDark = document.documentElement.classList.contains('dark');
				toggleButton.setAttribute('aria-label', isDark ? 'Switch to light theme' : 'Switch to dark theme');
			}
			
			// Mobile menu functionality
			const mobileMenuButton = document.getElementById('mobile-menu-button');
			const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
			const mobileMenuPanel = document.getElementById('mobile-menu-panel');
			const mobileMenuClose = document.getElementById('mobile-menu-close');
			
			function openMobileMenu() {
				document.body.style.overflow = 'hidden';
				mobileMenuBackdrop.classList.remove('opacity-0', 'pointer-events-none');
				mobileMenuBackdrop.classList.add('opacity-100');
				mobileMenuPanel.classList.remove('scale-95', 'opacity-0', 'pointer-events-none');
				mobileMenuPanel.classList.add('scale-100', 'opacity-100');
			}
			
			function closeMobileMenu() {
				document.body.style.overflow = '';
				mobileMenuBackdrop.classList.add('opacity-0', 'pointer-events-none');
				mobileMenuBackdrop.classList.remove('opacity-100');
				mobileMenuPanel.classList.add('scale-95', 'opacity-0', 'pointer-events-none');
				mobileMenuPanel.classList.remove('scale-100', 'opacity-100');
			}
			
			if (mobileMenuButton) {
				mobileMenuButton.addEventListener('click', openMobileMenu);
			}
			
			if (mobileMenuClose) {
				mobileMenuClose.addEventListener('click', closeMobileMenu);
			}
			
			if (mobileMenuBackdrop) {
				mobileMenuBackdrop.addEventListener('click', closeMobileMenu);
			}
			
			// Close menu on escape key
			document.addEventListener('keydown', function(e) {
				if (e.key === 'Escape' && !mobileMenuPanel.classList.contains('pointer-events-none')) {
					closeMobileMenu();
				}
			});
		});
	</script>
</body>

</html>
